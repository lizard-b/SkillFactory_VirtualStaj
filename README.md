# SkillFactory_Sprint

**REST API «FSTR»**

В рамках итоговой аттестации был разработан REST API для Федерации Спортивного Туризма России. ФСТР ведёт базу горных перевалов, которая пополняется туристами и нуждается в усовершенствовании. 
Задача была принять участие в разработке мобильного приложения и придумать REST API по заданным критериям для взаимодействия с базой данных и мобильным приложением.

Была создана база данных перевалов, написаны классы по работе с БД для добавления новых значений в таблицу перевалов. Реализованы методы для REST API:

**POST/pereval/**:

Турист с помощью мобильного приложения вносит информацию о себе и перевале:

	•	ФИО, эл. почта, телефон
 
 	•	Название перевала
  
  	•	Координаты перевала и его высоту
   
   	•	Несколько фотографий
    

Результатом POST-запроса будет следующее:

	•	status — код HTTP, целое число:
 
 		-	500 — ошибка при выполнении операции;
   
   		-	400 — Bad Request (при нехватке полей);
     
     	-	200 — успех.
       
       •	message — строка:

       	-	Причина ошибки (если она была);
	 
	 	-	Отправлено успешно;
   
   		-	Если отправка успешна, дополнительно возвращается id вставленной записи.
     
_Пример запроса:_

{
  "beauty_title": "string",
  "title": "string",
  "other_titles": "string",
  "connect": "string",
  "user": {
    "email": "string",
    "last_name": "string",
    "first_name": "string",
    "patronymic": "string",
    "phone": "string"
  },
  "coords": {
    "latitude": "19.",
    "longitude": "79.84803",
    "elevation": 2147483647
  },
  "level": {
    "winter": "1A",
    "spring": "1A",
    "summer": "1A",
    "autumn": "1A"
  },
  "images": [
    {
      "images": "string",
      "title": "string"
    }
  ]
}

_Примеры ответа:_

{ "status": 500, "message": "Ошибка подключения к базе данных","id": null}

{ "status": 200, "message": null, "id": 42 }


**GET/pereval/<id>**:

Метод позволяет получить одну запись (перевал) по её id. Выводится вся информация об объекте, в том числе статус модерации.

**PATCH/pereval/<id>**:

Метод позволяет частично отредактировать существующую запись, если она в статусе new.

После того, как турист добавит в БД информацию о новом перевале, сотрудники ФСТР проведут модерацию для каждого нового объекта и поменяют поле status. Допустимые значения: new, pending, accepted, rejected.

**Что может пользователь с помощью этого REST API:**

	•	Создавать новые объекты перевала со своими данными, загружать фотографии (в текущей реализации они сохраняются в виде ссылок)
 
 	•	Просматривать статус модерации для объекта
  
  	•	Просматривать все объекты, когда-либо отправленные на сервер самим пользователем, а также их статусы
   
   	•	Редактировать отправленные на сервер данные об объекте, если они в статусе new. 
    	При этом пользователь может редактировать все поля, кроме тех, что содержат в себе ФИО, адрес почты и номер телефона
    

JSON-схема API будет генерироваться по адресу: http://127.0.0.1:8000/api/schema/, по ней будет строиться Swagger-UI документация по адресу: http://127.0.0.1:8000/api/docs/

Код покрыт тестами, отчет находится в файле FSTR/htmlcov/index.html.
